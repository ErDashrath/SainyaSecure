{% extends 'modules/base_module.html' %}

{% block module_icon %}clipboard-list{% endblock %}
{% block module_icon_large %}clipboard-list{% endblock %}
{% block module_status %}SECURE{% endblock %}

{% block module_content %}
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
    <!-- System Logs Feed -->
    <div>
        <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-bold text-white">Real-Time System Logs</h3>
            <div class="flex gap-2">
                <select class="select select-sm bg-gray-800 text-white border-gray-700">
                    <option>All Logs</option>
                    <option>Security</option>
                    <option>Network</option>
                    <option>Authentication</option>
                    <option>System</option>
                </select>
                <button class="btn btn-military btn-sm">
                    <i class="fas fa-download mr-2"></i>Export
                </button>
            </div>
        </div>
        
        <div class="bg-gray-900 rounded-lg p-4 h-80 overflow-y-auto font-mono text-sm">
            <div class="space-y-1">
                <div class="flex items-center gap-3">
                    <span class="text-green-400">[2024-01-15 14:32:15]</span>
                    <span class="text-blue-400">[INFO]</span>
                    <span class="text-gray-300">User login successful: admin@command.center</span>
                </div>
                <div class="flex items-center gap-3">
                    <span class="text-green-400">[2024-01-15 14:32:10]</span>
                    <span class="text-purple-400">[AUTH]</span>
                    <span class="text-gray-300">2FA verification completed for user ID: 1001</span>
                </div>
                <div class="flex items-center gap-3">
                    <span class="text-green-400">[2024-01-15 14:31:58]</span>
                    <span class="text-cyan-400">[NETWORK]</span>
                    <span class="text-gray-300">P2P node NODE-007 connected from 192.168.1.147</span>
                </div>
                <div class="flex items-center gap-3">
                    <span class="text-green-400">[2024-01-15 14:31:45]</span>
                    <span class="text-yellow-400">[SECURITY]</span>
                    <span class="text-gray-300">Security scan completed - 0 threats detected</span>
                </div>
                <div class="flex items-center gap-3">
                    <span class="text-green-400">[2024-01-15 14:31:32]</span>
                    <span class="text-green-400">[SYSTEM]</span>
                    <span class="text-gray-300">Database backup completed successfully</span>
                </div>
                <div class="flex items-center gap-3">
                    <span class="text-green-400">[2024-01-15 14:31:20]</span>
                    <span class="text-red-400">[ERROR]</span>
                    <span class="text-gray-300">Failed login attempt from IP: 10.0.0.25 (blocked)</span>
                </div>
                <div class="flex items-center gap-3">
                    <span class="text-green-400">[2024-01-15 14:31:08]</span>
                    <span class="text-blue-400">[INFO]</span>
                    <span class="text-gray-300">Message sent via encrypted channel: MSG-4847</span>
                </div>
                <div class="flex items-center gap-3">
                    <span class="text-green-400">[2024-01-15 14:30:55]</span>
                    <span class="text-purple-400">[AUTH]</span>
                    <span class="text-gray-300">Password policy updated for security compliance</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Log Analytics -->
    <div>
        <h3 class="text-lg font-bold text-white mb-4">Log Analytics</h3>
        <div class="space-y-4">
            <!-- Log Level Distribution -->
            <div class="bg-gray-800 rounded-lg p-4">
                <h4 class="font-semibold text-white mb-3">Log Levels (Last 24h)</h4>
                <div class="space-y-2">
                    <div class="flex items-center justify-between">
                        <span class="text-blue-400 text-sm">INFO</span>
                        <div class="flex-1 mx-3 bg-gray-700 rounded-full h-2">
                            <div class="bg-blue-500 h-2 rounded-full" style="width: 65%"></div>
                        </div>
                        <span class="text-white text-sm">1,247</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-yellow-400 text-sm">WARNING</span>
                        <div class="flex-1 mx-3 bg-gray-700 rounded-full h-2">
                            <div class="bg-yellow-500 h-2 rounded-full" style="width: 20%"></div>
                        </div>
                        <span class="text-white text-sm">87</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-red-400 text-sm">ERROR</span>
                        <div class="flex-1 mx-3 bg-gray-700 rounded-full h-2">
                            <div class="bg-red-500 h-2 rounded-full" style="width: 8%"></div>
                        </div>
                        <span class="text-white text-sm">12</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-purple-400 text-sm">AUTH</span>
                        <div class="flex-1 mx-3 bg-gray-700 rounded-full h-2">
                            <div class="bg-purple-500 h-2 rounded-full" style="width: 7%"></div>
                        </div>
                        <span class="text-white text-sm">156</span>
                    </div>
                </div>
            </div>
            
            <!-- Recent Alerts -->
            <div class="bg-gray-800 rounded-lg p-4">
                <h4 class="font-semibold text-white mb-3">Security Alerts</h4>
                <div class="space-y-3">
                    <div class="flex items-start gap-3 p-3 bg-red-900 bg-opacity-20 rounded border-l-4 border-red-500">
                        <i class="fas fa-exclamation-triangle text-red-400 mt-0.5"></i>
                        <div>
                            <div class="text-white text-sm font-semibold">Failed Login Attempts</div>
                            <div class="text-gray-400 text-xs">Multiple failed attempts from IP: 10.0.0.25</div>
                            <div class="text-gray-500 text-xs mt-1">2 minutes ago</div>
                        </div>
                    </div>
                    
                    <div class="flex items-start gap-3 p-3 bg-yellow-900 bg-opacity-20 rounded border-l-4 border-yellow-500">
                        <i class="fas fa-shield-alt text-yellow-400 mt-0.5"></i>
                        <div>
                            <div class="text-white text-sm font-semibold">Network Anomaly Detected</div>
                            <div class="text-gray-400 text-xs">Unusual traffic pattern on Node-007</div>
                            <div class="text-gray-500 text-xs mt-1">15 minutes ago</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- System Health -->
            <div class="bg-gray-800 rounded-lg p-4">
                <h4 class="font-semibold text-white mb-3">System Health</h4>
                <div class="grid grid-cols-2 gap-4">
                    <div class="text-center">
                        <div class="text-2xl font-bold text-green-500">98.7%</div>
                        <div class="text-xs text-gray-400">Uptime</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-blue-500">2.3ms</div>
                        <div class="text-xs text-gray-400">Response Time</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-purple-500">847GB</div>
                        <div class="text-xs text-gray-400">Data Processed</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold text-green-500">0</div>
                        <div class="text-xs text-gray-400">Critical Issues</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="text-center py-6">
    <p class="text-gray-400 mb-4">Advanced log aggregation with real-time monitoring, threat detection, and comprehensive audit trails</p>
    <div class="flex justify-center gap-4">
        <button class="btn btn-military" onclick="showComingSoon()">
            <i class="fas fa-search mr-2"></i>
            Advanced Search
        </button>
        <button class="btn btn-secondary" onclick="showComingSoon()">
            <i class="fas fa-bell mr-2"></i>
            Set Alerts
        </button>
    </div>
</div>
{% endblock %}

{% block module_actions %}
<div class="military-card p-4 text-center">
    <i class="fas fa-search text-3xl text-primary mb-3"></i>
    <h4 class="font-bold text-white mb-2">Log Search</h4>
    <p class="text-sm text-gray-400">Advanced log search and filtering</p>
    <button class="btn btn-military btn-sm mt-3" onclick="showComingSoon()">Coming Soon</button>
</div>

<div class="military-card p-4 text-center">
    <i class="fas fa-bell text-3xl text-secondary mb-3"></i>
    <h4 class="font-bold text-white mb-2">Alert Rules</h4>
    <p class="text-sm text-gray-400">Configure automated alerts</p>
    <button class="btn btn-secondary btn-sm mt-3" onclick="showComingSoon()">Coming Soon</button>
</div>

<div class="military-card p-4 text-center">
    <i class="fas fa-chart-line text-3xl text-info mb-3"></i>
    <h4 class="font-bold text-white mb-2">Log Analytics</h4>
    <p class="text-sm text-gray-400">Detailed log analysis and trends</p>
    <button class="btn btn-info btn-sm mt-3" onclick="showComingSoon()">Coming Soon</button>
</div>
{% endblock %}

{% block module_js %}
// Auto-scroll logs to bottom
const logContainer = document.querySelector('.h-80.overflow-y-auto');
if (logContainer) {
    logContainer.scrollTop = logContainer.scrollHeight;
}

// Simulate real-time log updates
setInterval(function() {
    // In real implementation, this would fetch new logs via WebSocket or AJAX
    console.log('Log system monitoring active...');
}, 3000);
{% endblock %}